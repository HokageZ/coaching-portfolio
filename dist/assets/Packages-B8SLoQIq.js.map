{"version":3,"file":"Packages-B8SLoQIq.js","sources":["../../src/components/sections/Packages.jsx"],"sourcesContent":["// File path: components/sections/Packages.jsx (adjust path as needed)\n\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useLanguage } from '../../context/LanguageContext'; // Adjust path as needed\nimport SectionAnimator from '../animations/SectionAnimator'; // Adjust path as needed\n\n// --- PackageCard Component ---\n// Renders a single package card UI based on props received from Packages component\nconst PackageCard = ({ pkg, t, language, allPackages, onPackageChange, formatPrice, userLocation, exchangeRate, userCurrency }) => {\n\n  // Handler for duration dropdown change\n  const handleDurationChange = (e) => {\n    e.stopPropagation();\n    const newDuration = e.target.value;\n    onPackageChange(newDuration); // Calls handler passed from Packages component\n  };\n\n  // Generates text for WhatsApp button based on tier and price\n  const getButtonText = (tierName) => {\n    // Determine which tier's prices to use based on the name\n    const tierData = pkg.tiers.find(tData => tData.name === tierName) || pkg.tiers[0]; // Fallback to first tier\n    const priceInfo = formatPrice(tierData.price, tierData.priceUSD);\n\n    if (language === 'ar') {\n      return tierName === t('packages.silver')\n        ? `احصل على الباقة الفضية (${priceInfo.price} ${priceInfo.currency})`\n        : `احصل على الباقة الذهبية (${priceInfo.price} ${priceInfo.currency})`;\n    }\n    return tierName === t('packages.silver')\n      ? `Get Silver Package (${priceInfo.price} ${priceInfo.currency})`\n      : `Get Gold Package (${priceInfo.price} ${priceInfo.currency})`;\n  };\n\n  // Generates the WhatsApp message URL\n  const getWhatsAppMessage = (tierName) => {\n    // Determine which tier's prices to use\n    const tierData = pkg.tiers.find(tData => tData.name === tierName) || pkg.tiers[0]; // Fallback\n    const priceInfo = formatPrice(tierData.price, tierData.priceUSD);\n\n    return `https://wa.me/201099488562?text=${encodeURIComponent(\n      t('whatsapp.package') // Assumes 'whatsapp.package' translation exists (e.g., \"I'm interested in the {0} package - {1}\")\n        .replace('{0}', pkg.title)\n        .replace('{1}', `${tierName} (${priceInfo.price} ${priceInfo.currency})`)\n    )}`;\n  };\n\n  // Null checks and default values for rendering\n  const isHighlighted = pkg?.highlighted || false;\n\n  // Loading Skeleton - shown if pkg data isn't ready\n  if (!pkg || !pkg.tiers || pkg.tiers.length === 0) {\n    return (\n      <div className=\"rounded-xl overflow-hidden relative backdrop-blur-sm bg-black/60 border border-white/10 p-8\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-white/10 rounded w-1/3 mb-4\"></div>\n          <div className=\"h-4 bg-white/10 rounded w-2/3 mb-8\"></div>\n          <div className=\"space-y-3\">\n            {[1, 2, 3].map((i) => (\n              <div key={i} className=\"h-4 bg-white/10 rounded w-full\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // --- Card JSX ---\n  return (\n    <motion.div\n      className=\"relative\"\n      initial={{ opacity: 0, y: 50 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3, ease: \"easeOut\" }}\n    >\n      <motion.div\n        className={`rounded-xl overflow-hidden relative backdrop-blur-sm h-full flex flex-col ${\n          isHighlighted\n            ? 'bg-black/80 shadow-lg shadow-primary/20 border border-primary/30'\n            : 'bg-black/60 border border-white/10'\n        }`}\n        whileHover={{\n          y: -5,\n          boxShadow: isHighlighted\n            ? '0 25px 50px -12px rgba(182, 13, 13, 0.35)'\n            : '0 20px 25px -5px rgba(0, 0, 0, 0.2)'\n        }}\n        transition={{ duration: 0.15 }}\n      >\n        {/* Popular tag */}\n        {isHighlighted && (\n          <motion.div\n            className=\"absolute top-0 left-0 z-10 bg-primary text-white text-xs font-bold py-1 px-3 rounded-tr-md rounded-bl-md shadow-lg flex items-center justify-center\"\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2 }}\n          >\n            {t('packages.popular')}\n          </motion.div>\n        )}\n\n        {/* Card Header */}\n        <div className={`p-8 ${isHighlighted ? 'bg-gradient-to-r from-primary/80 to-primary/60' : 'bg-gradient-to-br from-neutral-800/90 to-black/80'} relative overflow-hidden`}>\n          {/* Background pattern */}\n          <div className=\"absolute inset-0 opacity-10\">\n            <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\">\n              <defs>\n                <pattern id=\"grid\" width=\"8\" height=\"8\" patternUnits=\"userSpaceOnUse\">\n                  <path d=\"M 8 0 L 0 0 0 8\" fill=\"none\" stroke=\"white\" strokeWidth=\"0.5\" />\n                </pattern>\n              </defs>\n              <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n            </svg>\n          </div>\n\n          <h3 className=\"text-2xl font-bold text-white mb-2 relative\">\n            <span dir=\"auto\" className=\"rtl:mr-2 inline-block\">{pkg.title}</span>\n          </h3>\n\n          {/* Duration Dropdown */}\n          <div className=\"flex items-center gap-4 mb-4 relative z-20\" onClick={(e) => e.stopPropagation()}>\n            <select\n              className=\"bg-black/40 text-white border border-white/20 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary/50 cursor-pointer\"\n              value={pkg.duration} // Controlled by selectedPackage state in parent\n              onChange={handleDurationChange}\n              onClick={(e) => e.stopPropagation()} // Prevent card click effects\n            >\n              {allPackages.map((p) => (\n                <option key={p.duration} value={p.duration}>\n                  {p.duration} {/* Display duration from package data */}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Card Body */}\n        <div className=\"p-8 pt-4 flex flex-col flex-grow relative\">\n          {/* Features Section */}\n          <div className=\"mb-3\">\n            <h4 className=\"font-semibold text-white/90 flex items-center\">\n              <svg className=\"w-5 h-5 mr-2 text-primary\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n              </svg>\n              <span dir=\"auto\" className=\"rtl:mr-3 inline-block\">{t('packages.features')}</span>\n            </h4>\n          </div>\n          <ul className=\"space-y-3 mb-6 flex-grow\">\n            {pkg.features.map((feature, idx) => (\n              <li key={idx} className=\"flex items-start\">\n                <div className={`flex-shrink-0 w-5 h-5 mr-3 rounded-full flex items-center justify-center bg-primary/20 text-primary`}>\n                  <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                </div>\n                <span dir=\"auto\" className={`rtl:mr-3 text-gray-300 ${isHighlighted ? 'text-white/90' : ''}`}>{feature}</span>\n              </li>\n            ))}\n          </ul>\n\n          {/* Suitable For Section */}\n          {pkg.suitableFor && (\n            <div className=\"mb-5 text-sm text-white/90 bg-gradient-to-r from-black/40 to-black/20 p-3 rounded-lg border border-white/10 italic flex items-start\">\n              <svg className=\"w-5 h-5 mr-2 text-primary flex-shrink-0 mt-0.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <span dir=\"auto\" className=\"rtl:mr-3\">{pkg.suitableFor}</span>\n            </div>\n          )}\n\n          {/* Tiers Section Header */}\n          <div className=\"mb-4\">\n            <h4 className=\"font-semibold text-white/90 mb-2 flex items-center\">\n              <svg className=\"w-5 h-5 mr-2 text-primary\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <span dir=\"auto\" className=\"rtl:mr-3 inline-block\">{t('packages.tier')}</span>\n            </h4>\n          </div>\n\n          {/* Plan Options (Mapping Tiers) */}\n          <div className=\"grid grid-cols-1 gap-4 mb-2\">\n            {pkg.tiers.map((tier, idx) => {\n              // Format price specifically for this tier rendering\n              const priceInfo = formatPrice(tier.price, tier.priceUSD);\n              return (\n              <motion.div\n                key={idx}\n                className={`p-4 rounded-lg ${\n                    tier.name === t('packages.silver')\n                      ? 'bg-gradient-to-br from-gray-800/40 to-black/50 hover:from-gray-800/50 hover:to-black/60 border border-gray-500/30'\n                      : 'bg-gradient-to-br from-yellow-900/40 to-yellow-800/30 hover:from-yellow-800/50 hover:to-yellow-700/40 border border-yellow-500/30'\n                } transition-colors duration-300`}\n                whileHover={{ scale: 1.02, y: -2 }}\n                transition={{ duration: 0.2 }}\n              >\n                  {/* Tier Header (Name & Price) */}\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center\">\n                      <span className=\"text-2xl mr-3\">{tier.name === t('packages.silver') ? '🥈' : '🥇'}</span>\n                      <span dir=\"auto\" className={`font-bold text-2xl rtl:mr-2 ${ tier.name === t('packages.silver') ? 'text-gray-200' : 'text-yellow-400' }`}>\n                        {tier.name}\n                      </span>\n                    </div>\n                    <div className=\"text-right flex flex-col items-end\">\n                      {/* Discount Display */}\n                      <div className=\"flex items-center\">\n                        {/* Simple doubled price for \"original\" - adjust if needed */}\n                        <span className=\"text-sm text-white/60 line-through mr-2\">\n                          {/* Ensure priceInfo.price is a number before multiplying */}\n                          { !isNaN(parseInt(priceInfo.price)) ? parseInt(priceInfo.price) * 2 : ''} {priceInfo.currency}\n                        </span>\n                        <span className={`text-xs px-1.5 py-0.5 ${ tier.name === t('packages.silver') ? 'bg-gray-500/80' : 'bg-yellow-600/80' } text-white rounded-sm -mt-3 font-medium`}>\n                          {t('packages.discount')}\n                        </span>\n                      </div>\n                      {/* Actual Price */}\n                      <div className=\"flex items-baseline mt-1\">\n                        <span className=\"text-3xl font-bold text-white\">{priceInfo.price}</span>\n                        <span className=\"text-sm ml-1 text-white/60\">{priceInfo.currency}</span>\n                    </div>\n                  </div>\n                </div>\n\n                  {/* Divider */}\n                  <div className={`h-[1px] w-full bg-gradient-to-r from-transparent ${ tier.name === t('packages.silver') ? 'via-gray-400/30' : 'via-yellow-500/30' } to-transparent mb-3`}></div>\n\n                {/* Tier Benefits */}\n                <ul className=\"mb-3 space-y-2\">\n                  {tier.benefits.map((benefit, bidx) => (\n                    <li key={bidx} className=\"text-sm text-gray-300 flex items-start\">\n                        <span className={`mr-2 mt-0.5 ${ tier.name === t('packages.silver') ? 'text-gray-400' : 'text-yellow-400' }`}>•</span>\n                      <span dir=\"auto\" className=\"rtl:mr-3\">{benefit}</span>\n                    </li>\n                  ))}\n                </ul>\n\n                {/* WhatsApp button for each tier */}\n                <motion.a\n                  href={getWhatsAppMessage(tier.name)}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={`mt-2 w-full py-3 px-4 rounded-lg font-medium transition-all duration-300 relative overflow-hidden flex items-center justify-center ${\n                      tier.name === t('packages.silver')\n                        ? 'bg-gradient-to-r from-gray-600 to-gray-500 hover:from-gray-500 hover:to-gray-400 text-white'\n                        : 'bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 text-white'\n                  }`}\n                  whileHover={{ scale: 1.03 }}\n                  whileTap={{ scale: 0.98 }}\n                >\n                  <svg className=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347Z\" />\n                  </svg>\n                    <span className={`relative z-10 font-medium ${language === 'ar' ? 'font-arabic' : ''}`}>\n                      {getButtonText(tier.name)}\n                  </span>\n                </motion.a>\n              </motion.div>\n              );\n            })}\n          </div> {/* End Plan Options Grid */}\n        </div> {/* End Card Body */}\n      </motion.div> {/* End Card Inner Motion Div */}\n    </motion.div> /* End Card Outer Motion Div */\n  );\n};\n\n\n// --- Packages Container Component ---\n// Manages fetching location/currency, selecting package, and rendering the PackageCard\nconst Packages = () => {\n  // State variables\n  const [selectedPackage, setSelectedPackage] = useState(null); // Holds the currently displayed package object\n  const [userLocation, setUserLocation] = useState(null); // Holds country code ('EG', 'SA', 'INTL', etc.) or null initially\n  const [exchangeRate, setExchangeRate] = useState(1); // USD to userCurrency rate\n  const [userCurrency, setUserCurrency] = useState('USD'); // Currency code ('EGP', 'SAR', 'USD', etc.)\n  const [isLoadingLocation, setIsLoadingLocation] = useState(true); // Loading state for location/currency fetch\n\n  // Language context\n  const { t, language } = useLanguage();\n\n  // Memoized package data (recalculates only if 't' function changes)\n  const packages = useMemo(() => [\n    {\n      title: t('packages.testing.title'),\n      duration: t('packages.testing.duration'),\n      tiers: [\n        { name: t('packages.silver'), price: \"600\", priceUSD: \"45\", benefits: [ t('packages.silver.benefit.1'), t('packages.silver.benefit.2') ] },\n        { name: t('packages.gold'), price: \"1200\", priceUSD: \"90\", benefits: [ t('packages.gold.benefit.1'), t('packages.gold.benefit.2'), t('packages.gold.benefit.3') ] }\n      ],\n      features: [ t('packages.feature.1'), t('packages.feature.2'), t('packages.feature.3'), t('packages.feature.4'), t('packages.feature.5'), t('packages.feature.6'), t('packages.feature.7'), t('packages.feature.8'), t('packages.feature.9'), t('packages.feature.10') ],\n      suitableFor: t('packages.testing.suitableFor'), highlighted: false\n    },\n    {\n      title: t('packages.development.title'),\n      duration: t('packages.development.duration'),\n      tiers: [\n        { name: t('packages.silver'), price: \"1000\", priceUSD: \"70\", benefits: [ t('packages.silver.benefit.1'), t('packages.silver.benefit.2') ] },\n        { name: t('packages.gold'), price: \"2000\", priceUSD: \"140\", benefits: [ t('packages.gold.benefit.1'), t('packages.gold.benefit.2'), t('packages.gold.benefit.3') ] }\n      ],\n      features: [ t('packages.feature.1'), t('packages.feature.2'), t('packages.feature.3'), t('packages.feature.4'), t('packages.feature.5'), t('packages.feature.6'), t('packages.feature.7'), t('packages.feature.8'), t('packages.feature.9'), t('packages.feature.10') ],\n      suitableFor: t('packages.development.suitableFor'), highlighted: true\n    },\n    {\n      title: t('packages.journey.title'),\n      duration: t('packages.journey.duration'),\n      tiers: [\n        { name: t('packages.silver'), price: \"1600\", priceUSD: \"100\", benefits: [ t('packages.silver.benefit.1'), t('packages.silver.benefit.2') ] },\n        { name: t('packages.gold'), price: \"3200\", priceUSD: \"200\", benefits: [ t('packages.gold.benefit.1'), t('packages.gold.benefit.2'), t('packages.gold.benefit.3') ] }\n      ],\n      features: [ t('packages.feature.1'), t('packages.feature.2'), t('packages.feature.3'), t('packages.feature.4'), t('packages.feature.5'), t('packages.feature.6'), t('packages.feature.7'), t('packages.feature.8'), t('packages.feature.9'), t('packages.feature.10') ],\n      suitableFor: t('packages.journey.suitableFor'), highlighted: false\n    }\n  ], [t]);\n\n  // Effect to fetch user location and exchange rates ONCE on component mount\n  useEffect(() => {\n    const fetchUserLocationAndRates = async () => {\n      setIsLoadingLocation(true); // Indicate loading start\n      let determinedCountryCode = 'INTL'; // Default to international\n\n      try {\n        // --- 1. Fetch Country Code using Vercel API Route ---\n        console.log(`Workspaceing location from /api/get-location`);\n        const response = await fetch('/api/get-location');\n\n        if (!response.ok) {\n            const errorBody = await response.text();\n            throw new Error(`API route HTTP error! status: ${response.status}, body: ${errorBody}`);\n        }\n\n        const data = await response.json();\n        console.log('Location API route response:', data);\n\n        if (data && data.country_code) {\n            determinedCountryCode = data.country_code; // Use code from Vercel header\n        } else {\n            console.warn(\"Received invalid data from API route, using default 'INTL'.\");\n            determinedCountryCode = 'INTL'; // Fallback if API route response is bad\n        }\n\n      } catch (error) {\n        // --- Handle errors fetching from /api/get-location (e.g., dev environment) ---\n        console.warn('Fetching from /api/get-location failed, using fallback:', error.message);\n        // In a real dev scenario, might still want a fallback (e.g., based on language)\n        // For simplicity here, we stick to 'INTL' as the ultimate fallback on error.\n        determinedCountryCode = 'INTL';\n      }\n\n      // --- 2. Set User Location State ---\n      setUserLocation(determinedCountryCode);\n      console.log(`User location determined as: ${determinedCountryCode}`);\n\n      // --- 3. Fetch Exchange Rates (if necessary) based on determined location ---\n      try {\n        const arabCountries = {\n            'EG': 'EGP', 'SA': 'SAR', 'AE': 'AED', 'KW': 'KWD', 'QA': 'QAR',\n            'BH': 'BHD', 'OM': 'OMR', 'JO': 'JOD', 'LB': 'LBP', 'IQ': 'IQD',\n            'SY': 'SYP', 'YE': 'YER', 'PS': 'ILS', 'MA': 'MAD', 'DZ': 'DZD',\n            'TN': 'TND', 'LY': 'LYD', 'SD': 'SDG', 'SO': 'SOS', 'DJ': 'DJF',\n            'MR': 'MRO'\n            // Add any other countries/currencies needed\n        };\n\n        if (determinedCountryCode === 'EG') {\n          // Handle Egypt: Use EGP, no exchange rate fetch needed\n          setExchangeRate(1);\n          setUserCurrency('EGP');\n          console.log('User is in Egypt (EG), setting currency to EGP.');\n\n        } else if (arabCountries[determinedCountryCode]) {\n          // Handle other specified Arab countries: Fetch exchange rate\n          const targetCurrency = arabCountries[determinedCountryCode];\n          console.log(`Workspaceing exchange rates for ${targetCurrency} (${determinedCountryCode})...`);\n\n          // !! IMPORTANT: Exchange Rate API !!\n          // - Check API provider's terms, limits, and key requirements.\n          // - Store API keys securely (Vercel Environment Variables).\n          // - Consider adding more robust error handling for this specific fetch.\n          const currencyApiUrl = `https://api.exchangerate-api.com/v4/latest/USD`; // Using v4 example\n          const currencyResponse = await fetch(currencyApiUrl);\n\n          if (!currencyResponse.ok) {\n            throw new Error(`Currency API HTTP error! Status: ${currencyResponse.status}`);\n          }\n          const currencyData = await currencyResponse.json();\n          if (!currencyData || !currencyData.rates) {\n            throw new Error('Invalid data received from currency API');\n          }\n\n          const rate = currencyData.rates[targetCurrency];\n          if (rate) {\n            setExchangeRate(rate);\n            setUserCurrency(targetCurrency);\n            console.log(`Exchange rate set for ${targetCurrency}: ${rate}`);\n          } else {\n            // If rate for specific currency not found, fallback to USD\n            console.warn(`Rate for ${targetCurrency} not found in API response, falling back to USD.`);\n            setExchangeRate(1);\n            setUserCurrency('USD');\n          }\n        } else {\n          // Default to USD for all other countries or 'INTL'\n          setExchangeRate(1);\n          setUserCurrency('USD');\n          console.log(`Location (${determinedCountryCode}) not Egypt or specified Arab country, using USD.`);\n        }\n      } catch (exchangeError) {\n          // Handle errors during the exchange rate fetching process\n          console.error(\"Error fetching or processing exchange rates:\", exchangeError);\n          console.warn(\"Falling back to USD due to exchange rate fetch/processing error.\");\n          setExchangeRate(1); // Fallback to USD on error\n          setUserCurrency('USD');\n      } finally {\n           // --- 4. Finish Loading ---\n           setIsLoadingLocation(false); // Stop loading indicator\n      }\n    };\n\n    fetchUserLocationAndRates();\n  }, []); // Empty dependency array means this runs only once when the component mounts\n\n  // Effect to set the initially selected package (runs after packages/language potentially update)\n  useEffect(() => {\n    // Set the \"Development\" package (index 1) as default/initial\n    if (packages && packages.length > 1) {\n        setSelectedPackage(packages[1]);\n    } else if (packages && packages.length > 0) {\n        setSelectedPackage(packages[0]); // Fallback to first package if less than 2\n    }\n  }, [packages, language]); // Recalculate if packages data or language changes\n\n\n  // Handler to change the displayed package based on duration selection in PackageCard\n  const handlePackageChange = (duration) => {\n    const newPkg = packages.find(p => p.duration === duration);\n    if (newPkg) {\n      setSelectedPackage(newPkg);\n    }\n  };\n\n  // Function to format price based on location, rate, and currency\n  // Memoized with useCallback to prevent unnecessary re-renders of PackageCard if props haven't changed\n  const formatPrice = useCallback((priceEGP, priceUSD) => {\n    // Default return value\n    let calculatedPrice = '...'; // Show loading indicator initially\n    let displayCurrency = '';\n\n    // Only calculate prices once location/currency info is loaded\n    if (!isLoadingLocation) {\n        if (userLocation === 'EG' && priceEGP) {\n            // Use local EGP price if location is Egypt\n            calculatedPrice = priceEGP; // Assuming priceEGP is already formatted string\n            displayCurrency = t('packages.egp') || 'EGP'; // Use translation or fallback\n        } else if (userCurrency !== 'USD' && priceUSD && exchangeRate) {\n            // Convert USD to local currency if applicable and rate is available\n            // Format to integer (no decimals), adjust .toFixed() if needed\n            calculatedPrice = (parseFloat(priceUSD) * exchangeRate).toFixed(0);\n            const currencyTranslationKey = `packages.${userCurrency.toLowerCase()}`; // e.g., 'packages.sar'\n            const translatedSymbol = t(currencyTranslationKey);\n            // Use translated symbol if translation exists, otherwise use the code\n            displayCurrency = translatedSymbol !== currencyTranslationKey ? translatedSymbol : userCurrency;\n        } else if (priceUSD) {\n            // Default to USD price if no other condition met (includes INTL location)\n            calculatedPrice = parseFloat(priceUSD).toFixed(0); // Format USD price as integer\n            displayCurrency = t('packages.usd') || 'USD'; // Use translation or fallback\n        } else {\n             calculatedPrice = 'N/A'; // Case where priceUSD is missing\n             displayCurrency = '';\n        }\n    }\n\n    return {\n      price: calculatedPrice,\n      currency: displayCurrency\n    };\n  // Dependencies for useCallback ensure the function instance updates only if these values change\n  }, [userLocation, userCurrency, exchangeRate, t, isLoadingLocation]);\n\n\n  // --- Main Component JSX ---\n  return (\n    <SectionAnimator\n      id=\"packages\"\n      title={t('packages.title')}\n      subtitle={t('packages.subtitle')}\n      highlightedText={t('packages.title')}\n      className=\"bg-black relative\" // Ensure SectionAnimator handles className correctly\n    >\n      {/* Background effects */}\n      <div className=\"absolute inset-0 bg-gradient-radial opacity-30 pointer-events-none\"></div>\n      <div className=\"absolute inset-0 opacity-5 pointer-events-none\"\n        style={{\n          backgroundImage: `radial-gradient(circle, rgba(182, 13, 13, 0.2) 1px, transparent 1px)`,\n          backgroundSize: '20px 20px',\n          willChange: 'transform', // Performance hints (use with caution)\n          backfaceVisibility: 'hidden',\n          WebkitBackfaceVisibility: 'hidden',\n        }}>\n      </div>\n\n      <div className=\"container mx-auto px-4 relative z-10\">\n        <div className=\"py-12\">\n          <div className=\"max-w-4xl mx-auto\" style={{ /* Performance hints */ willChange: 'transform', backfaceVisibility: 'hidden', WebkitBackfaceVisibility: 'hidden' }}>\n            {/* AnimatePresence handles the transition between package cards */}\n            <AnimatePresence mode=\"wait\" initial={false}>\n              {/* Conditionally render PackageCard only when a package is selected */}\n              {selectedPackage ? (\n                <motion.div\n                  key={selectedPackage.duration} // Animation key based on duration\n                  initial={{ opacity: 0, x: 20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: -20 }}\n                  transition={{\n                    duration: 0.2,\n                    ease: \"easeOut\"\n                  }}\n                >\n                  <PackageCard\n                    pkg={selectedPackage}\n                    t={t}\n                    language={language}\n                    allPackages={packages}\n                    onPackageChange={handlePackageChange}\n                    formatPrice={formatPrice} // Pass down the memoized formatPrice function\n                    // Pass down relevant state needed by PackageCard for display/logic\n                    userLocation={userLocation}\n                    exchangeRate={exchangeRate}\n                    userCurrency={userCurrency}\n                  />\n                </motion.div>\n              ) : (\n                 // Show a loading state while selectedPackage is initially null\n                 <div className=\"text-center text-white/50 p-8\">Loading package details...</div>\n              ) }\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n    </SectionAnimator>\n  );\n};\n\nexport default Packages;"],"names":["PackageCard","pkg","t","language","allPackages","onPackageChange","formatPrice","userLocation","exchangeRate","userCurrency","handleDurationChange","e","newDuration","getButtonText","tierName","tierData","tData","priceInfo","getWhatsAppMessage","isHighlighted","jsxs","jsx","i","motion","p","feature","idx","tier","benefit","bidx","Packages","selectedPackage","setSelectedPackage","useState","setUserLocation","setExchangeRate","setUserCurrency","isLoadingLocation","setIsLoadingLocation","useLanguage","packages","useMemo","useEffect","determinedCountryCode","response","errorBody","data","error","arabCountries","targetCurrency","currencyResponse","currencyData","rate","exchangeError","handlePackageChange","duration","newPkg","useCallback","priceEGP","priceUSD","calculatedPrice","displayCurrency","currencyTranslationKey","translatedSymbol","SectionAnimator","AnimatePresence"],"mappings":"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"}