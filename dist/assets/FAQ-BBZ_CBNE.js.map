{"version":3,"file":"FAQ-BBZ_CBNE.js","sources":["../../src/components/sections/FAQ.jsx"],"sourcesContent":["import { useState, useContext, useEffect, memo, useMemo, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { ScrollContext } from '../../App';\nimport SectionAnimator from '../animations/SectionAnimator';\nimport { useLanguage } from '../../context/LanguageContext';\n\n// Further optimized FAQItem with useCallback for toggle\nconst FAQItem = memo(({ faq, index }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  \n  // Use callback to prevent recreating function on every render\n  const toggleOpen = useCallback(() => {\n    setIsOpen(prev => !prev);\n  }, []);\n  \n  // Precalculate styles to avoid object recreation in render\n  const panelStyle = {\n    maxHeight: isOpen ? '1000px' : '0',\n    opacity: isOpen ? 1 : 0,\n    transform: 'translateZ(0)',\n    willChange: 'max-height, opacity'\n  };\n  \n  const iconClass = `w-6 h-6 min-w-[24px] text-primary transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`;\n  const titleClass = `text-lg sm:text-xl font-semibold transition-colors duration-300 ${isOpen ? 'text-primary' : 'text-white'}`;\n  \n  return (\n    <div className=\"mb-4 border border-gray-800 rounded-lg overflow-hidden shadow-red hover:shadow-lg transition-all duration-300\">\n      {/* Question Button */}\n      <button\n        className=\"w-full flex justify-between items-center p-5 sm:p-6 text-left bg-black/60 backdrop-blur-sm hover:bg-primary/10 transition-colors duration-300\"\n        onClick={toggleOpen}\n        aria-expanded={isOpen}\n        aria-controls={`faq-answer-${index}`}\n      >\n        <h3 className={titleClass}>\n          {faq.question}\n        </h3>\n        <div className=\"flex items-center justify-center\">\n          <svg \n            className={iconClass}\n            fill=\"none\" \n            stroke=\"currentColor\" \n            viewBox=\"0 0 24 24\"\n          >\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n          </svg>\n        </div>\n      </button>\n      \n      {/* Answer Panel */}\n      <div \n        id={`faq-answer-${index}`}\n        className=\"overflow-hidden transition-all duration-300 ease-in-out will-change-[max-height]\"\n        style={panelStyle}\n        aria-hidden={!isOpen}\n      >\n        <div className=\"p-5 sm:p-6 bg-black/40 backdrop-blur-sm text-gray-300 font-chakra border-t border-gray-800\">\n          <p>{faq.answer}</p>\n        </div>\n      </div>\n    </div>\n  );\n});\n\n// Optimized FAQContent component\nconst FAQContent = memo(({ faqs, hasAnimated }) => {\n  // Memoize animation variants\n  const containerVariants = useMemo(() => ({\n    hidden: { opacity: 0 },\n    visible: { \n      opacity: 1,\n      transition: { \n        staggerChildren: 0.08, // Faster stagger\n        delayChildren: 0.1     // Reduced delay\n      }\n    }\n  }), []);\n  \n  const itemVariants = useMemo(() => ({\n    hidden: { opacity: 0, y: 20 },\n    visible: { \n      opacity: 1, \n      y: 0,\n      transition: { duration: 0.4 } // Faster animation\n    }\n  }), []);\n\n  return (\n    <motion.div \n      className=\"max-w-3xl mx-auto\"\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate={hasAnimated ? \"visible\" : \"hidden\"}\n      style={{ willChange: \"opacity\" }}\n    >\n      {faqs.map((faq, index) => (\n        <motion.div \n          key={index}\n          variants={itemVariants}\n          style={{ willChange: \"opacity, transform\" }}\n        >\n          <FAQItem faq={faq} index={index} />\n        </motion.div>\n      ))}\n    </motion.div>\n  );\n});\n\n// Optimized language-specific FAQ data\nconst getLocalizedFaqs = (language, t) => {\n  return [\n    { question: t('faq.q1'), answer: t('faq.a1') },\n    { question: t('faq.q2'), answer: t('faq.a2') },\n    { question: t('faq.q3'), answer: t('faq.a3') },\n    { question: t('faq.q4'), answer: t('faq.a4') },\n    { question: t('faq.q5'), answer: t('faq.a5') },\n    { question: t('faq.q6'), answer: t('faq.a6') },\n    { question: t('faq.q7'), answer: t('faq.a7') }\n  ];\n};\n\nconst FAQ = memo(() => {\n  const [hasAnimated, setHasAnimated] = useState(false);\n  const { visibleSections } = useContext(ScrollContext);\n  const isVisible = visibleSections['faq'] !== false;\n  const { t, language } = useLanguage();\n  \n  // Auto-animate with optimized timing\n  useEffect(() => {\n    if (hasAnimated) return; // Return early if already animated\n    \n    const timer = setTimeout(() => {\n      setHasAnimated(true);\n    }, 800);\n    \n    return () => clearTimeout(timer);\n  }, [hasAnimated]);\n  \n  // Set animation when in view\n  useEffect(() => {\n    if (isVisible && !hasAnimated) {\n      setHasAnimated(true);\n    }\n  }, [isVisible, hasAnimated]);\n\n  // Memoize the faqs array to prevent recreation on each render\n  const faqs = useMemo(() => getLocalizedFaqs(language, t), [t, language]);\n\n  // Text content\n  const titleHighlight = language === 'en' ? \"Questions\" : \"الأسئلة\";\n\n  // Only log in development\n  if (process.env.NODE_ENV === 'development') {\n    console.log('FAQ component rendering, isVisible:', isVisible, 'hasAnimated:', hasAnimated);\n  }\n\n  return (\n    <SectionAnimator\n      id=\"faq\"\n      title={t('faq.title')}\n      highlightedText={titleHighlight}\n      subtitle={t('faq.subtitle')}\n    >\n      <FAQContent faqs={faqs} hasAnimated={hasAnimated} />\n    </SectionAnimator>\n  );\n});\n\nexport default FAQ; "],"names":["FAQItem","memo","faq","index","isOpen","setIsOpen","useState","toggleOpen","useCallback","prev","panelStyle","iconClass","titleClass","jsxs","jsx","FAQContent","faqs","hasAnimated","containerVariants","useMemo","itemVariants","motion","getLocalizedFaqs","language","t","FAQ","setHasAnimated","visibleSections","useContext","ScrollContext","isVisible","useLanguage","useEffect","timer","titleHighlight","SectionAnimator"],"mappings":"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"}